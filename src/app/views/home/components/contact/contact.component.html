<section class="section container">
  <h2 class="section-heading">Contact</h2>
  <p class="section-paragraph">
    Did I spark your interest or do you have any questions? Please contact me
    either via the form down below or via the email or phone number provided at
    the bottom of the page.
  </p>
  <div class="form-container">
    <form
      #contactForm="ngForm"
      [class.visible]="emailStatus === EmailStatus.INITIAL"
      (ngSubmit)="onSubmit()"
    >
      <div class="name-and-email-container">
        <div>
          <div class="formgroup">
            <label for="name">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
              >
                <path
                  d="M20.822 18.096c-3.439-.794-6.64-1.49-5.09-4.418 4.72-8.912 1.251-13.678-3.732-13.678-5.082 0-8.464 4.949-3.732 13.678 1.597 2.945-1.725 3.641-5.09 4.418-3.073.71-3.188 2.236-3.178 4.904l.004 1h23.99l.004-.969c.012-2.688-.092-4.222-3.176-4.935z"
                />
              </svg>
            </label>
            <input
              id="name"
              type="text"
              name="name"
              [(ngModel)]="contact.name"
              required
              placeholder="Your name"
              #name="ngModel"
            />
          </div>
          <div *ngIf="name.invalid && name.touched" class="alerts-container">
            <p *ngIf="name.errors?.required" class="alert">
              You have to enter your name
            </p>
          </div>
        </div>
        <div>
          <div class="formgroup">
            <label for="email">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
              >
                <path
                  d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"
                />
              </svg>
            </label>

            <input
              type="email"
              name="email"
              [(ngModel)]="contact.email"
              required
              placeholder="Your email address"
              email
              #email="ngModel"
            />
          </div>
          <div *ngIf="email.invalid && email.touched" class="alerts-container">
            <p *ngIf="email.errors?.required" class="alert">
              You have to enter your email address
            </p>
            <p *ngIf="email.errors?.email" class="alert">
              Invalid email address
            </p>
          </div>
        </div>
      </div>

      <div class="textarea-container">
        <textarea
          name="message"
          [(ngModel)]="contact.message"
          rows="12"
          required
          placeholder="Your message..."
          #message="ngModel"
        ></textarea>
        <div
          *ngIf="message.invalid && message.touched"
          class="alerts-container"
        >
          <p *ngIf="message.errors?.required" class="alert">
            You have to enter a message
          </p>
        </div>
      </div>
      <button class="button" [disabled]="!contactForm.form.valid" type="submit">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            d="M24 0l-6 22-8.129-7.239 7.802-8.234-10.458 7.227-7.215-1.754 24-12zm-15 16.668v7.332l3.258-4.431-3.258-2.901z"
          />
        </svg>
        <p>Submit</p>
      </button>
    </form>
    <div
      *ngIf="emailStatus === EmailStatus.PENDING"
      class="lottie-player-container"
    >
      <lottie-player
        src="/assets/animations/spinner.json"
        background="rgba(0, 0, 0, 0)"
        speed="1"
        style="width: 100px; height: 100px"
        autoplay
        loop
      ></lottie-player>
    </div>
    <div
      *ngIf="emailStatus === EmailStatus.ERROR"
      class="lottie-player-container"
    >
      <lottie-player
        src="/assets/animations/error.json"
        background="rgba(0, 0, 0, 0)"
        speed="1"
        style="width: 150px; height: 150px"
        autoplay
      ></lottie-player>
      <p>Oops, something went wrong!</p>
      <p>
        Please try again. If the problem persists please contact me via the
        email or phone number provided at the bottom of the page instead.
      </p>
      <button class="button retry-button" (click)="onClickRetryButton()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            d="M13.5 2c-5.288 0-9.649 3.914-10.377 9h-3.123l4 5.917 4-5.917h-2.847c.711-3.972 4.174-7 8.347-7 4.687 0 8.5 3.813 8.5 8.5s-3.813 8.5-8.5 8.5c-3.015 0-5.662-1.583-7.171-3.957l-1.2 1.775c1.916 2.536 4.948 4.182 8.371 4.182 5.797 0 10.5-4.702 10.5-10.5s-4.703-10.5-10.5-10.5z"
          />
        </svg>
        <p>Retry</p>
      </button>
    </div>
    <div
      *ngIf="emailStatus === EmailStatus.SUCCESS"
      class="lottie-player-container"
    >
      <lottie-player
        src="/assets/animations/success.json"
        background="rgba(0, 0, 0, 0)"
        speed="1"
        style="width: 150px; height: 150px"
        autoplay
      ></lottie-player>
      <p>Thank you!</p>
      <p>Ich will respond to you shortly.</p>
    </div>
  </div>
</section>
